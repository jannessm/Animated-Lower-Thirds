<!DOCTYPE html>
<html lang="en">
	<head>
		<!--Animated Lower Thirds v1.6-->
		<!--Author: NoeAL-->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>Lower Thirds Control Panel</title>
		<link rel="stylesheet" href="../common/css/style-control_panel.css">
		<link rel="stylesheet" href="../common/css/cp-icons.css">
		<script src="../common/js/vue.js"></script>
		<script>
			const DEFAULT_LOGOS = ['../logos/logo_1.png', '../logos/logo_2.png', '../logos/logo_3.png', '../logos/logo_4.png'];
			const THEME_OPTIONS = ['acri', 'dark', 'rachni'];
			const DEFAULT_FONTS = {
				'sans-serif': ['Open Sans', 'Poppins', 'Raleway'],
				'monospace': ['Anonymous Pro'],
				'cursive': ['Patua One', 'Cookie', 'Oleo Script', 'Kalam', 'Fredoka One'],
				'serif': ['Lora'],
			};
			const TOOLTIP = {
				"animation-time" : "Length of the in and out animation (sec)",
				"active-time" : "How long the LT is active (sec)",
				"inactive-time" : "How long the LT is inactive (sec)" ,
				"lock-active" : "Lock the active state: Always active.",
				"one-shot" : "Oneshot: Turns off the LT Switch when it goes into inactive state.",
				"enabled-preview" : "Show/hide the LT in the preview window",
				"align_left" : "Left alignment.",
				"align_center" : "Center alignment.",
				"align_right" : "Right alignment.",
				"style" : "Style: Changes the look of the LT.",
				"size" : "Size of the LT.",
				"margin" : "Horizontal and vertical margin.",
				"text_size" : "Ratio between the size of the texts.",
				"line_spacing" : "Space between texts.",					
				"font" : "LT Text font.",
				"logo" : "Show/hide the logo image.",
				"logo_size" : "Size of the logo image.",
				"shadow" : "Show/hide shadows.",
				"shadow_opacity" : "Shadows opacity.",
				"fill_colors" : "Enable/disable fill or background colors.",
				"corners" : "Round corners.",
				"borders" : "Enable/disable borders.",
				"borders_thinkness" : "Border thickness.",
				"uppercase" : "Enable/disable uppercase.",
				"bold" : "Enable/disable bold.",
				"clean" : "Clear the text fields and set the logo to default.",
				"autotrigger" : "Autotrigger: Turns on the switch automatically when a slot memory is loaded.",
				"autoload" : "Autoload: Loads automatically the next memory slot every time it goes to the inactive state. Ready to display in the next cycle.",
				"custom_times" : "Show/hide custom time settings.",
				"preview_window" : "Show/hide preview window.",
				"custom-fonts" : "Add fonts from Google Fonts.",
				"default-logos" : "Change the default logos of each LT.<br>Make sure to copy the logo files into the logos folder.<br>You can use JPG, PNG, TIFF, GIF, etc.<br>With transparency or animated.",
			};

			const JSCOLOR_CONFIG = {
				width: 100,
				padding: 5,
				borderRadius: 3,
				borderWidth: 0,
				controlBorderWidth: 0,
				backgroundColor: '#1f1e1f',
				position: 'right',
				shadow: true,
				previewSize: 60
			};
			
			const { createApp, ref, reactive, computed } = Vue;
		</script>
		<script src="utils.js"></script>
		<script src="./modules/main_settings.js"></script>
		<script src="./modules/image_selector.js"></script>
		<script src="./modules/lower_third.js"></script>
		<script src="./modules/app.js"></script>
		<script src="../common/js/jquery.js"></script>
		<script src="../common/js/jscolor.js"></script>
		<script src="../common/js/hotkeys.js"></script>
		<script src="../common/js/jquery-ui.js"></script>
	</head>
	<body class="lower-thirds-panel panel">
		<div id="alt-panel" class="static-panel-top" style="margin-bottom: 0px"></div>

		<template id="app-template">
			<main-settings ref="mainSettings"
						   @switch-changed="checkSwitches"
						   @appearance-changed="checkAppearance"
						   @open-logo="openLogo"
						   @fonts-changed="updateFonts"></main-settings>
			
			<div id="sortable">
				<lower-third v-for="index in lts.value"
							 class="sortees"
							 :id="`alt-${index}`"
							 :key="index"
							 :index="index"
							 :fonts="fonts"
							 ref="lt"
							 @switch-changed="checkSwitches"
							 @open-logo="openLogo"
							 @reset-logo="checkLogos"></lower-third>
			</div>

			<image-selector ref="imageSelector" @default-changed="checkLogos" @logo-changed="updateIsDefault"></image-selector>

			<div id="export-data" class="center hide" >
				<div class="export-data-bg" onclick="okExportPopup()"></div>
				<div class="form-input">
					<div>
						<h1>Copied to clipboard</h1>
						<p>For security reasons, the exported data has been copied to the clipboard. Please paste it into a text editor (e.g. Notepad) and save it as a TXT file.</p>
						<p>If you prefer, you can copy it manually:</p>
						<textarea id="dataInput" rows="4" cols="50" onclick="this.focus();this.select()"></textarea>
					</div>
					<div class="export-btns">
						<div class="btn-ok-export" onclick="okExportPopup()">Ok</div>
					</div>
				</div>
			</div>

			<div id="reset-all" class="center hide" >
				<div class="reset-all-bg" onclick="cancelResetPopup()"></div>
				<div class="form-input">
					<div>
						<h1>Reset all settings</h1>
						<p>You are going to reset all configuration and memory slots Â¿Are you sure?</p>
					</div>
					<div class="reset-btns">
						<div class="btn-ok-reset" onclick="okResetPopup()">Ok</div>
						<div class="btn-cancel" onclick="cancelResetPopup()">Cancel</div>
					</div>
				</div>
			</div>

			<div id='fileNames'></div>

			<div id="alt-preview" :class="{active: previewCollapsed}" v-show="enabledPreview">
				<label>
					<div class="icon icon-search"></div>
				</label>
				<div id="toggle-preview" :class="{active: previewCollapsed}" @click="previewCollapsed = !previewCollapsed">
					<div class="icon icon-chevron-down"></div>
				</div>
				<div class="embed-container">
					<iframe id="myiframe" src="./browser-source.html?mode=preview" frameborder="0" allowfullscreen></iframe>
				</div>
			</div>
		</template>

		<template id="main-settings-template">
			<div id="alt-main-config-content">
				<div :class="{active: active.value}">
					<label class="switch" :class="{'switch-left': switchesLeft.value}">
						<input id="alt-master-switch" type="checkbox" @change="$emit('appearanceChanged')" v-model="active.value"> <!--"checked" to active switch-->
						<span class="slider round"></span>
					</label>
					
					<div class="main-title" :class="{'switch-left': switchesLeft.value}">
						<div class="main-icon icon icon-settings"></div>
						<div>Main settings</div>					
					</div>
					
					<label class="accordion" :class="{active: !accordionCollapsed}" @click="toggleAccordion"></label>
					<div id="global-configuration" class="hidable" :style="{'max-height': maxHeight}">
						<div id="time-options">
							<div class="settings-title">Global Times</div>
							<div class="settings-inputs">
								<input id="alt-animation-time" type="number" placeholder="in-out" tabindex="1" v-model="animationTime.value">
								<input id="alt-active-time" type="number" placeholder="active"  tabindex="2" v-model="activeTime.value" :disabled="lockActive.value">
								<label class="config-btn lock-input">
									<input type="checkbox" id="alt-lock-active" v-model="lockActive.value">
									<div class="icon-btn icon icon-lock"></div>
								</label>
								<input class="storable" id="alt-inactive-time" type="number" placeholder="inactive" tabindex="3" v-model="inactiveTime.value" :disabled="oneShot.value">
								<label class="config-btn lock-input">
									<input type="checkbox" id="alt-one-shot" v-model="oneShot.value">
									<div class="icon-btn icon icon-oneshot"></div>
								</label>
							</div>
						</div>
						
						<label class="more" :class="{active: !showMoreCollapsed}" @click="toggleMore"><div class="icon icon-angle-down"></div></label>
						<div id="more-configuration">
							<div class="tab">
								<button id="defaultTab" class="tablinks" @click="changeTab('appearance')" :class="{active: activeTab == 'appearance'}">Appearance</button>
								<button class="tablinks" @click="changeTab('customs')" :class="{active: activeTab == 'customs'}">Customs</button>
								<button class="tablinks" @click="changeTab('system')" :class="{active: activeTab == 'system'}">System</button>
							</div>
							
							<!-- Tab content -->
							<div id="tab-appearance" class="tabcontent" v-show="activeTab == 'appearance'">
								<div id="theme-options">
									<div class="settings-title">Theme</div>
									<div class="settings-inputs">
										<select name="theme" id="theme" @change="changeTheme">
											<option v-for="theme in themeOptions" :name="theme" :value="theme" :selected="theme == activeTheme.value">{{theme}}</option>
										</select>
									</div>
								</div>
								<div class="default-options">
									<div class="settings-title"></div>
									<div class="settings-inputs">
										<label><input type="checkbox" id="alt-enable-preview" v-model="enabledPreview.value" @change="$emit('appearanceChanged')">Enable preview window</label>
										<label><input type="checkbox" id="alt-hidden-slot-numbers" v-model="hiddenSlotNumbers.value" @change="$emit('appearanceChanged')">Hide numbers of the memory slots</label>
										<label><input type="checkbox" id="alt-switches-left" v-model="switchesLeft.value" @change="$emit('appearanceChanged')">Switches on the left</label>
										<label><input type="checkbox" id="alt-enabled-tooltips" v-model="enabledTooltips.value" @change="initTooltips()">Show tooltips with the stored content</label>
									</div>
								</div>
							</div>
	
							<div id="tab-customs" class="tabcontent" v-show="activeTab == 'customs'">
								<div id="fonts-options">
									<div class="settings-title">Custom Font</div>
									<div class="settings-inputs">
										<input id="new-font-name" v-model="customFontFamily" placeholder="Font Family" tabindex="51">
										<input id="new-font-url" v-model="customFontUrl" placeholder="@import url" tabindex="52">
										<div id="add-new-font" class="add" @click="addFont()"><div class="icon icon-plus-square"></div></div>
									</div>
								</div>
								<div id="custom-font-list">
									<ul>
										<li v-for="(customFont, index) in customFonts.value">
											<div class="font-name-added" :id="'font-name-added-' + index">{{customFont.name}}</div>
											<div class="font-url-added" :id="'font-url-added-' + index">{{customFont.url}}</div>
											<div class="delete-font" @click="delFont(customFont)"><div class="icon icon-trash"></div></div>
										</li>
									</ul>
								</div>
								<div class="logos-options">
									<div class="settings-title">Default Logos</div>
									<div class="settings-inputs">
										<div v-for="(logoSrc, index) in defaultLogos.value" class="logo-container default" @click="openLogo(index)">
											<div class="logo-numbers">{{index + 1}}</div>
											<img class="logo-default" :src="logoSrc">
										</div>
									</div>
								</div>
							</div>
	
							<div id="tab-system" class="tabcontent" v-show="activeTab == 'system'">
								<div class="bottom-options">
									<div class="settings-title">Backup Data</div>
									<div class="settings-inputs">
										<div class="import-file-btn">
											<label for="importFile">Import</label>
											<input id="importFile" type="file"/>
										</div>
										<!-- <input type="text" id="dataInput"> -->
										<div class="btn-settings" onclick="exportData()">Export</div>
										<div class="btn-settings" onclick="openResetPopup()">Reset</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</template>

		<template id="lt-template">
			<div>
				<div :id="`alt-${index}-config-content`">
					<div :class="{active: active, inactive: inactive}">
						<label class="switch" :class="{'switch-left': switchLeft}">
							<input type="checkbox" @change="$emit('switchChanged')" :checked="switchOn" v-model="switchOn">
							<span class="slider round"></span>
						</label>
						<label class="config-btn preview-btn" v-show="enabledPreview">
							<input type="checkbox" :id="`alt-${index}-preview`" :checked="previewOn" v-model="previewOn">
							<div class="icon-btn icon icon-search"></div>
						</label>
						<div class="drag-handle" :class="{'switch-left': switchLeft}">
							<div class="alt-number-icon" v-show="!hiddenSlotNumbers">{{index + 1}}</div>
							<div class="renameable" v-show="!nameIsEditable" @click="nameClickHandler()">{{title.value}}</div>
							<div class="settings-inputs">
								<input type='text' v-model="title.value" maxlength='40' v-show="nameIsEditable" @focusout="nameIsEditable = false">
							</div>
						</div>
						<label class="accordion" @click="toggleStyleSettings()" :class="{active: showStyleSettings}"></label>
						<div :id="`style-settings-${index}`" class="hidable">
							<div class="grid-container">
								<div class="grid-row">
									<div>
										<div class="align-toggle">
										<input id="alt-1-align-left" type="radio" :checked="align.value == 'left'" @click="align.value = 'left'"/>
										<label for="alt-1-align-left"><div class="icon icon-aling-left"></div></label>
										<input id="alt-1-align-center" type="radio" :checked="align.value == 'center'" @click="align.value = 'center'" :disabled="style.value == 1"/>
										<label for="alt-1-align-center"><div class="icon icon-aling-center"></div></label>
										<input id="alt-1-align-right" type="radio" :checked="align.value == 'right'" @click="align.value = 'right'"/>
										<label for="alt-1-align-right"><div class="icon icon-aling-right"></div></label>
										</div>
									</div>
									<div>
										<div class="input-icon icon icon-paint-brush"></div>
										<div class="number-input">
											<input id="alt-1-style" min="1" max="3" v-model="style.value" type="number" readonly>
											<button @click="stepDown(style, 1)" class="down"></button>
											<button @click="stepUp(style, 3)" class="up"></button>
										</div>
									</div>
									<div>
										<div class="input-icon icon icon-size"></div>
										<div class="number-input">
											<input id="alt-1-size" min="10" max="50" v-model="size.value" type="number">
											<button @click="stepDown(size, 10)" class="down"></button>
											<button @click="stepUp(size, 50)" class="up"></button>
										</div>
									</div>							
									<div class="margin-config group">
										<div class="input-icon icon icon-position"></div>
										<div class="number-input">
											<input id="alt-1-margin-h" min="0" max="100" v-model="marginH.value" type="number">
											<button @click="stepDown(marginH, 0)" class="down"></button>
											<button @click="stepUp(marginH, 100)" class="up"></button>
										</div>
										<div class="number-input input-no-icon">
											<input id="alt-1-margin-v" min="0" max="55" v-model="marginV.value" type="number">
											<button @click="stepDown(marginV, 0)" class="down"></button>
											<button @click="stepUp(marginV, 55)" class="up"></button>
										</div>
									</div>
								</div>
								<div class="grid-row">
									<div>
										<div class="input-icon icon icon-text-height"></div>
											<div class="number-input">
											<input id="alt-1-inverse-ratio" min="0" max="10" v-model="inverseRatio.value" type="number">
											<button @click="stepDown(inverseRatio, 0)" class="down"></button>
											<button @click="stepUp(inverseRatio, 10)" class="up"></button>
										</div>
									</div>
									<div>
										<div class="input-icon icon icon-line-spacing"></div>
											<div class="number-input">
											<input id="alt-1-line-spacing" min="-5" max="5" v-model="lineSpacing.value" type="number">
											<button @click="stepDown(lineSpacing, -5)" class="down"></button>
											<button @click="stepUp(lineSpacing, 5)" class="up"></button>
										</div>
									</div>									
									<div class="font-config group">
										<div class="input-icon icon icon-font"></div>
										<select id="alt-1-font" v-model="font.value">
											<optgroup v-for="(fonts, fontgroup) in fonts" :label="fontgroup">
												<option v-if="fontgroup != 'custom'" v-for="font in fonts" :value="`${font}, ${fontgroup}`">{{font}}</option>
												<option v-else v-for="font in fonts" :value="`${font}`">{{font}}</option>
											</optgroup>
										</select>
									</div>
								</div>
								<div class="grid-row">
									<div>
										<label class="config-btn">
											<input type="checkbox" id="alt-1-logo" v-model="enabledLogo.value" :checked="enabledLogo.value">
											<div class="icon-btn icon icon-image"></div>
										</label>									
										<div class="number-input">
											<input id="alt-1-logo-size" min="-10" max="10" v-model="logoSize.value" type="number" :disabled="!enabledLogo.value">
											<button @click="stepDown(logoSize, -10)" class="down" :disabled="!enabledLogo.value"></button>
											<button @click="stepUp(logoSize, 10)" class="up" :disabled="!enabledLogo.value"></button>
										</div>
									</div>
									<div>
										<label class="config-btn">
											<input type="checkbox" id="alt-1-shadows" v-model="shadows.value" :checked="shadows.value">
											<div class="icon-btn icon icon-shadow"></div>
										</label>
										<div class="number-input">
											<input id="alt-1-shadow-amount" min="1" max="10" v-model="shadowAmount.value" type="number" :disabled="!shadows.value">
											<button @click="stepDown(shadowAmount, 1)" class="down" :disabled="!shadows.value"></button>
											<button @click="stepUp(shadowAmount, 10)" class="up" :disabled="!shadows.value"></button>
										</div>
									</div>
									<div>
										<label class="config-btn">
											<input type="checkbox" id="alt-1-background" v-model="background.value" :checked="background.value">
											<div class="icon-btn icon icon-fill-drip"></div>
										</label>
										<div class="fill-color-appearance">
										<!-- <div id="alt-1-style-color-appearance" class="fill-color-appearance"> -->
											<div class="tool-title" :class="{disabled: !background.value}">Clr 1</div>
											<input id="alt-1-style-color-1" v-model="backgroundColor1.value" :data-jscolor="JSON.stringify(jscolorConfig)" :disabled="!background.value">
											<div class="tool-title" :class="{disabled: !background.value}">Clr 2</div>
											<input id="alt-1-style-color-2" v-model="backgroundColor2.value" :data-jscolor="JSON.stringify(jscolorConfig)" :disabled="!background.value">
										</div>
									</div>
								</div>
								<div class="grid-row">
									<div>
										<div class="input-icon icon icon-corner"></div>
										<div class="number-input">
											<input id="alt-1-corners" min="0" max="10" v-model="corners.value" type="number">
											<button @click="stepDown(corners, 0)" class="down"></button>
											<button @click="stepUp(corners, 10)" class="up"></button>
										</div>
									</div>
									<div>
										<label class="config-btn">
											<input type="checkbox" id="alt-1-border-thickness" v-model="borders.value" :checked="borders.value">
											<div class="icon-btn icon icon-thickness"></div>
										</label>
										<div class="number-input">
											<input id="alt-1-border-thickness-amount" min="1" max="10" v-model="borderThickness.value" type="number" :disabled="!borders.value">
											<button @click="stepDown(borderThickness, 1)" class="down" :disabled="!borders.value"></button>
											<button @click="stepUp(borderThickness, 10)" class="up" :disabled="!borders.value"></button>
										</div>
									</div>
									<div>
										<label class="config-btn">
											<input type="checkbox" id="alt-1-border-color" v-model="borders.value" :checked="borders.value">
											<div class="icon-btn icon icon-pen"></div>
										</label>
										<!-- <div id="alt-1-style-border-color-appearance" class="border-color-appearance"> -->
										<div class="border-color-appearance">
											<div class="tool-title" :class="{disabled: !borders.value}">Clr 3</div>
											<input id="alt-1-style-color-3" v-model="bordersColor1.value" :data-jscolor="JSON.stringify(jscolorConfig)" :disabled="!borders.value">
											<div class="tool-title" :class="{disabled: !borders.value}">Clr 4</div>
											<input id="alt-1-style-color-4" v-model="bordersColor2.value" :data-jscolor="JSON.stringify(jscolorConfig)" :disabled="!borders.value">
										</div>
									</div>
								</div>
							</div>					
						</div>
						<div class="first-edit-container">
							<div class ="logo-container" @click="openLogo()" v-show="enabledLogo.value">
								<img id="alt-1-logo-preview" class="logo-preview" :src="logoSrc.value">
							</div>
							<div class="textfields-container">
								<input type="text" id="alt-1-name" placeholder="Name" tabindex="4" v-model="name.value">
								<div :id="`alt-${index}-name-appearance`">
									<label class="config-btn small">
										<input type="checkbox" id="alt-1-name-transform" :checked="nameTransform.value" v-model="nameTransform.value">
										<div class="icon-btn icon small icon-uppercase"></div>
									</label>
									<label class="config-btn small">
										<input type="checkbox" id="alt-1-name-weight" :checked="nameBold.value" v-model="nameBold.value">
										<div class="icon-btn icon small icon-bold"></div>
									</label>
									<label class="config-btn small">
										<input type="checkbox" id="alt-1-name-style" :checked="nameItalic.value" v-model="nameItalic.value">
										<div class="icon-btn icon small icon-italic"></div>
									</label>
									<input id="alt-1-name-color" :data-jscolor="JSON.stringify(jscolorConfig)" v-model="nameColor.value">
								</div>
								<input type="text" id="alt-1-info" placeholder="Info" tabindex="4" v-model="info.value">
								<div :id="`alt-${index}-info-appearance`">
									<label class="config-btn small">
										<input type="checkbox" id="alt-1-info-transform" :checked="infoTransform.value" v-model="infoTransform.value">
										<div class="icon-btn icon small icon-uppercase"></div>
									</label>
									<label class="config-btn small">
										<input type="checkbox" id="alt-1-info-weight" :checked="infoBold.value" v-model="infoBold.value">
										<div class="icon-btn icon small icon-bold"></div>
									</label>
									<label class="config-btn small">
										<input type="checkbox" id="alt-1-info-style" :checked="infoItalic.value" v-model="infoItalic.value">
										<div class="icon-btn icon small icon-italic"></div>
									</label>
									<input id="alt-1-info-color" :data-jscolor="JSON.stringify(jscolorConfig)" v-model="infoColor.value">
								</div>
								<div style="clear: both"></div>
							</div>
						</div>
						<div class="panel-bottom">
							<div class="clean" @click="clearInputs"><div class="icon icon-cross"></div></div>
							<ul>
								<li v-for="(name, index) in slotNames.value"
									:class="{delete: slotIsDelete[index], 'active-slot': slotIsActive(index), stored: slotIsStored(index)}"
									@mouseDown="slotHandlerDown(index)"
									@mouseUp="slotHandlerUp(index)">
									<div class="slot-number">{{index + 1}}</div>
								</li>
							</ul>
							<div class="time-bar">
								<div>{{activeTimeMonitor}}</div>
								<div>{{inactiveTimeMonitor}}</div>
							</div>
							<label class="config-btn">
								<input type="checkbox" id="alt-1-autotrigger" v-model="autoTrigger.value" :checked="autoTrigger.value">
								<div class="icon-btn icon icon-autotrigger"></div>
							</label>
							<label class="config-btn">
								<input type="checkbox" id="alt-1-autoload" v-model="autoLoad.value" :checked="autoLoad.value">
								<div class="icon-btn icon icon-sync"></div>
							</label>
							<label id="alt-1-custom-times" class="accordion" @click="toggleTimeSettings()" :class="{active: customTimeSettings.value}">
								<div class="icon-btn icon icon-clock"></div>
							</label>
							<div :id="`time-settings-${index}`" class="hidable" :class="{active: customTimeSettings.value}">
								<div class="alt-time-options">
									<div class="settings-title">LT{{index + 1}} Times</div>
									<div class="settings-inputs">
										<input type="number" placeholder="in-out" tabindex="12" v-model="animationTime.value">
										<input type="number" placeholder="active" tabindex="13" v-model="activeTime.value" :disabled="lockActive.value">
										<label class="config-btn lock-input">
											<input type="checkbox" id="alt-1-lock-active" v-model="lockActive.value" :checked="lockActive.value">
											<div class="icon-btn icon icon-lock"></div>
										</label>
										<input id="alt-1-inactive-time" type="number" placeholder="inactive" tabindex="14" v-model="inactiveTime.value" :disabled="oneShot.value">
										<label class="config-btn lock-input">
											<input type="checkbox" id="alt-1-oneshot" v-model="oneShot.value" :checked="oneShot.value">
											<div class="icon-btn icon icon-oneshot"></div>
										</label>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</template>

		<template id="image-selector-template">
			<div style="position: fixed">
				<div id="select-image" class="center" v-show="active">
					<div class="select-image-bg" @click="active = false"></div>
					<div class="form-input">
						<div class="file-btns">
							<label for="logo-file">Choose image</label>
							<input type="file" id="logo-file" accept="image/*" @change="showPreview">
							<div class="btn-remove" @click="removeLogo()" v-show="!isDefault"><div class="icon-btn icon icon-trash"></div></div>
						</div>
						<div id="file-preview" :class="{'no-image': !previewSrc}">
							<img :src="previewSrc" style="display: block" v-show="!!previewSrc">
						</div>
						<div class="file-btns">
							<div class="btn-ok" @click="ok()">Ok</div>
							<div class="btn-cancel" @click="active=false">Cancel</div>
						</div>
					</div>
				</div>
			</div>
		</template>

		<script>
			const bc  = new BroadcastChannel('obs-lower-thirds-channel'); //Send to browser source
			const bcr = new BroadcastChannel('obs-lower-thirds-channel2'); //Receives from the source
			const bcf = new BroadcastChannel('obs-lower-thirds-fonts'); //Send custom fonts

			const app = createApp(App).mount('#alt-panel');

			// var slotDeleted = false;

			// var new_font_to_send;

			// var alt_1_active_time_monitor;
			// var alt_1_inactive_time_monitor;


			// var alt_1_autoload;
			// var alt_1_jumpnext;
			
			// var alt_1_autotrigger;

			// var global_oneshot;
			// var alt_1_oneshot;

			// var global_lock_active;
			// var alt_1_lock_active;

			// var alt_1_style = default_style;
			// var alt_1_inverse_ratio = default_inverse_ratio;
			// var alt_1_name_size;
			// var alt_1_info_size;
			// var alt_1_size;
			// var alt_1_line_spacing;
			// var alt_1_margin_h;
			// var alt_1_margin_v;
			// var alt_1_shadows;
			// var alt_1_font;
			// var alt_1_logo_size;
			// var alt_1_shadow_amount;
			// var alt_1_corners;
			// var alt_1_border_thickness_amount;

			// var alt_1_corners;
			// var alt_1_border_thickness_amount;

			// var hotkeyMasterSwitchOld = hotkeyMasterSwitch;
			// var hotkeySwitch1Old = hotkeySwitch1;

			// var hotkeyAlt1Slot1Old = hotkeyAlt1Slot1;
			// var hotkeyAlt1Slot2Old = hotkeyAlt1Slot2;
			// var hotkeyAlt1Slot3Old = hotkeyAlt1Slot3;
			// var hotkeyAlt1Slot4Old = hotkeyAlt1Slot4;
			// var hotkeyAlt1Slot5Old = hotkeyAlt1Slot5;
			// var hotkeyAlt1Slot6Old = hotkeyAlt1Slot6;
			// var hotkeyAlt1Slot7Old = hotkeyAlt1Slot7;
			// var hotkeyAlt1Slot8Old = hotkeyAlt1Slot8;
			// var hotkeyAlt1Slot9Old = hotkeyAlt1Slot9;
			// var hotkeyAlt1Slot10Old = hotkeyAlt1Slot10;

			// var alt_1_turnoff = false;

			// ////////////////////

			// 	//Check switches and blue and red lights in the background to see active and inactive times
			// 	if (masterSwitchIsOn) {
			// 		//When the Main Switch is ON the lower thirds can be Active, Inactive or OFF.
			// 		//Switch 1
			// 		if (document.getElementById("lower-thirds-switch1").checked){
			// 			if (alt_1_active_time_monitor >= 0 && alt_1_inactive_time_monitor == 0 && alt_1_name && alt_1_info){
			// 				document.getElementById("alt-1-config-content").classList.remove("inactive");
			// 				document.getElementById("alt-1-config-content").classList.add("active");
			// 				alt_1_jumpnext = true;
			// 			} else {
			// 				document.getElementById("alt-1-config-content").classList.remove("active");
			// 				document.getElementById("alt-1-config-content").classList.add("inactive");
			// 				//check if autoload is active and jump to next slot
			// 				if (alt_1_autoload && alt_1_jumpnext) {
			// 					alt_1_jumpnext = false;
			// 					jumpNextSlot("#alt-1-memory-slots", "#alt-1-name", "#alt-1-info", "#alt-1-logo-preview", alt_1_waiting_time);
			// 				}
			// 			}
			// 		} else {
			// 			document.getElementById("alt-1-config-content").className = '';
			// 			if (alt_1_turnoff && alt_1_autoload && alt_1_jumpnext) {
			// 				alt_1_jumpnext = false;
			// 				jumpNextSlot("#alt-1-memory-slots", "#alt-1-name", "#alt-1-info", "#alt-1-logo-preview", alt_1_waiting_time);
			// 			}
			// 		}

			// 	} else {
			// 		//When the Main Switch is OFF all the Lower Thirds area Inactives or OFF.
			// 		//Switch 1
			// 		if (document.getElementById("lower-thirds-switch1").checked) {
			// 			document.getElementById("alt-1-config-content").classList.add("inactive");
			// 			document.getElementById("alt-1-config-content").classList.remove("active");
			// 		} else {
			// 			document.getElementById("alt-1-config-content").className = '';
			// 		}
			// 	}
			// }

			// ////////////////////

			// //Reload the hotjeys.js file updated by the LUA script
			// function updateHotkeys() {
			//     src = '../common/js/hotkeys.js';
			//     $('script[src="' + src + '"]').remove();
			//     var head= document.getElementsByTagName('head')[0];
		    // 	var script= document.createElement('script');
		    // 	script.src= src;
		    // 	head.appendChild(script);
			// }

			// //Toggle the switches if a hotkey is pressed
			// function checkHotkeys (){
			// 	if (hotkeyMasterSwitch != hotkeyMasterSwitchOld){
			// 		if (mainSettings.active) {
			// 			$('#lower-thirds-masterswitch').prop('checked', false).change();
		    //         }
		    //         else {
			// 			$('#lower-thirds-masterswitch').prop('checked', true).change();
		    //         }
			// 		hotkeyMasterSwitchOld = hotkeyMasterSwitch;
			// 	}

			// 	if (hotkeySwitch1 != hotkeySwitch1Old){
			// 		if (document.getElementById("lower-thirds-switch1").checked) {
			// 			$('#lower-thirds-switch1').prop('checked', false).change();
			// 		}
			// 		else {
			// 			$('#lower-thirds-switch1').prop('checked', true).change();
			// 		}
			// 		hotkeySwitch1Old = hotkeySwitch1;
			// 	}

			// 	//Memory Slots triggers LT1
			// 	if (hotkeyAlt1Slot1 != hotkeyAlt1Slot1Old) {
			// 		if ($("#alt-1-name-1").text() && $("#alt-1-info-1").text()){
			// 			loadSlot("#alt-1-name", "#alt-1-info", "#alt-1-logo-preview", $("#alt-1-name-1").text(), $("#alt-1-info-1").text(), $("#alt-1-logo-1").text(), 0);
			// 		}
			// 		hotkeyAlt1Slot1Old = hotkeyAlt1Slot1;
			// 	}
			// 	if (hotkeyAlt1Slot2 != hotkeyAlt1Slot2Old) {
			// 		loadSlot("#alt-1-name", "#alt-1-info", "#alt-1-logo-preview", $("#alt-1-name-2").text(), $("#alt-1-info-2").text(), $("#alt-1-logo-2").text(), 0);
			// 		hotkeyAlt1Slot2Old = hotkeyAlt1Slot2;
			// 	}
			// 	if (hotkeyAlt1Slot3 != hotkeyAlt1Slot3Old) {
			// 		loadSlot("#alt-1-name", "#alt-1-info", "#alt-1-logo-preview", $("#alt-1-name-3").text(), $("#alt-1-info-3").text(), $("#alt-1-logo-3").text(), 0);
			// 		hotkeyAlt1Slot3Old = hotkeyAlt1Slot3;
			// 	}
			// 	if (hotkeyAlt1Slot4 != hotkeyAlt1Slot4Old) {
			// 		loadSlot("#alt-1-name", "#alt-1-info", "#alt-1-logo-preview", $("#alt-1-name-4").text(), $("#alt-1-info-4").text(), $("#alt-1-logo-4").text(), 0);
			// 		hotkeyAlt1Slot4Old = hotkeyAlt1Slot4;
			// 	}
			// 	if (hotkeyAlt1Slot5 != hotkeyAlt1Slot5Old) {
			// 		loadSlot("#alt-1-name", "#alt-1-info", "#alt-1-logo-preview", $("#alt-1-name-5").text(), $("#alt-1-info-5").text(), $("#alt-1-logo-5").text(), 0);
			// 		hotkeyAlt1Slot5Old = hotkeyAlt1Slot5;
			// 	}
			// 	if (hotkeyAlt1Slot6 != hotkeyAlt1Slot6Old) {
			// 		loadSlot("#alt-1-name", "#alt-1-info", "#alt-1-logo-preview", $("#alt-1-name-6").text(), $("#alt-1-info-6").text(), $("#alt-1-logo-6").text(), 0);
			// 		hotkeyAlt1Slot6Old = hotkeyAlt1Slot6;
			// 	}
			// 	if (hotkeyAlt1Slot7 != hotkeyAlt1Slot7Old) {
			// 		loadSlot("#alt-1-name", "#alt-1-info", "#alt-1-logo-preview", $("#alt-1-name-7").text(), $("#alt-1-info-7").text(), $("#alt-1-logo-7").text(), 0);
			// 		hotkeyAlt1Slot7Old = hotkeyAlt1Slot7;
			// 	}
			// 	if (hotkeyAlt1Slot8 != hotkeyAlt1Slot8Old) {
			// 		loadSlot("#alt-1-name", "#alt-1-info", "#alt-1-logo-preview", $("#alt-1-name-8").text(), $("#alt-1-info-8").text(), $("#alt-1-logo-8").text(), 0);
			// 		hotkeyAlt1Slot8Old = hotkeyAlt1Slot8;
			// 	}
			// 	if (hotkeyAlt1Slot9 != hotkeyAlt1Slot9Old) {
			// 		loadSlot("#alt-1-name", "#alt-1-info", "#alt-1-logo-preview", $("#alt-1-name-9").text(), $("#alt-1-info-9").text(), $("#alt-1-logo-9").text(), 0);
			// 		hotkeyAlt1Slot9Old = hotkeyAlt1Slot9;
			// 	}
			// 	if (hotkeyAlt1Slot10 != hotkeyAlt1Slot10Old) {
			// 		loadSlot("#alt-1-name", "#alt-1-info", "#alt-1-logo-preview", $("#alt-1-name-10").text(), $("#alt-1-info-10").text(), $("#alt-1-logo-10").text(), 0);
			// 		hotkeyAlt1Slot10Old = hotkeyAlt1Slot10;
			// 	}
			// }

			function openResetPopup() {
				document.getElementById("reset-all").classList.remove("hide");
			}
			function okResetPopup() {
				localStorage.clear(); //To clear data fields

				location.reload();
			}

			function cancelResetPopup() {
				document.getElementById("reset-all").classList.add("hide");
			}

			//Export popup info
			function openExportPopup() {
				document.getElementById("export-data").classList.remove("hide");
			}
			function okExportPopup() {
				document.getElementById("export-data").classList.add("hide");
			}

			// //Memory Slots System
			// function checkSlots (memory_slot, name, info, logo) {
			// 	$("ul" + memory_slot + " li").each(function(){
			// 		const check_slot_id = $(this).attr('id');
			// 		const check_name_id = $(this).children('.stored-name').attr('id');
			// 		const check_info_id = $(this).children('.stored-info').attr('id');
			// 		const check_logo_id = $(this).children('.stored-logo').attr('id');
			// 		const check_is_default_logo = $(logo).hasClass('default');
			// 		const name_value = $(this).children('.stored-name').text();
			// 		const info_value = $(this).children('.stored-info').text();
			// 		const logo_value = $(this).children('.stored-logo').text();

			// 		let check_slot_id_element = document.getElementById(check_slot_id);

			// 		//If stored data has no logo, set to default
			// 		if (name_value && info_value && !logo_value) {
			// 			$(this).children('.stored-logo').text("default");
			// 		}
			// 		if ($('#' + check_name_id).is(':empty') && $('#' + check_info_id).is(':empty') && $('#' + check_logo_id).is(':empty')){
			// 			check_slot_id_element.classList.remove("stored");
			// 		} else {
			// 			check_slot_id_element.classList.add("stored");
			// 		}
			// 		//Check active slots
			// 		if ($(name).val() == name_value && $(info).val() == info_value && ($(logo).attr("src") == logo_value || (check_is_default_logo && logo_value == "default"))){
			// 			if(name_value && info_value && logo_value){
			// 				check_slot_id_element.classList.add("active-slot");
			// 				check_slot_id_element.classList.remove("next-to-load");
			// 			}
			// 		} else {
			// 			check_slot_id_element.classList.remove("active-slot");
			// 		}

			// 		//Check if it has default logo
			// 		if (logo_value && logo_value != "default"){
			// 			check_slot_id_element.classList.add("custom-logo");
			// 		} else {
			// 			check_slot_id_element.classList.remove("custom-logo");
			// 		}

			// 	});
			// }

			// //////////////////////////////////////

			// function jumpNextSlot(memory_slot, name, info, logo, alt_waiting_time) {
			// 	let find_next = false;
			// 	let find_first = false;
			// 	let first_stored_slot;
			// 	let next_slot_num;
			// 	let to_load = 0;

			// 	const name_loaded = $(name + ":text").val();
			// 	const info_loaded = $(info + ":text").val();
			// 	const logo_loaded = $(logo).attr("src");

			// 	//Find actual and search the next slot to load
			// 	$("ul" + memory_slot + " li").each(function(){
			// 		const name_id = $(this).children('.stored-name').attr('id');
			// 		const info_id = $(this).children('.stored-info').attr('id');
			// 		const logo_id = $(this).children('.stored-logo').attr('id');
			// 		const name_value = $(this).children('.stored-name').text();
			// 		const info_value = $(this).children('.stored-info').text();
			// 		const logo_value = $(this).children('.stored-logo').text();
			// 		const slot_number = Number($(this).children('.slot-number').text());

			// 		const loadedSlot = (name_loaded == name_value && info_loaded == info_value && (logo_loaded == logo_value || $(logo).hasClass(logo_value))) ? true : false;
			// 		const emptySlot = ($('#' + name_id).is(':empty') && $('#' + info_id).is(':empty') && $('#' + logo_id).is(':empty')) ? true : false;

			// 		if(!find_first && !emptySlot) {
			// 			find_first = true;
			// 			first_stored_slot = slot_number;
			// 		}
			// 		if (loadedSlot) {
			// 			find_next = true;
			// 			const loaded_slot_num = slot_number;
			// 			next_slot_num = loaded_slot_num + 1;
			// 		}

			// 		if (find_next && slot_number == next_slot_num && !emptySlot) {
			// 			find_next = false;
			// 			to_load = slot_number;
			// 		}
			// 		if (find_next && (next_slot_num > 10 || emptySlot)) {
			// 			find_next = false;
			// 			to_load = first_stored_slot;
			// 		}
			// 	});

			// 	// Si hay un slot para cargar
			// 	if (to_load && to_load > 0) {
			// 		$("ul" + memory_slot + " li:nth-child("+to_load+")").each(function () {
			// 			const slot_id = ($(this).attr('id'));
			// 			const name_id = $(this).children('.stored-name').attr('id');
			// 			const info_id = $(this).children('.stored-info').attr('id');
			// 			const logo_id = $(this).children('.stored-logo').attr('id');

			// 			const name_to_load = $(this).children('#' + name_id).text();
			// 			const info_to_load = $(this).children('#' + info_id).text();
			// 			const logo_to_load = $(this).children('#' + logo_id).text();

			// 			loadSlot(name, info, logo, name_to_load, info_to_load, logo_to_load, alt_waiting_time, false);
			// 			$('#' + slot_id).addClass('next-to-load');
			// 		});
			// 	}
			// }

			// //////////////////////////////////////

			// function loadSlot(name, info, logo, name_to_load, info_to_load, logo_to_load, alt_waiting_time, from_hotkey = true) {
			// 	setTimeout(function (){
			// 		const default_logo = logo.replace("-preview", "-default");
			// 		const default_logo_value = $(default_logo).attr("src");

			// 		$(name + ":text").val(name_to_load);
			// 		$(info + ":text").val(info_to_load);
			// 		if (logo_to_load == "default") {
			// 			logo_to_load = default_logo_value;
			// 		}
			// 		$(logo).attr("src", logo_to_load);
			// 		refreshData();
			// 	}, alt_waiting_time * 1000);

			// 	//Switch ON the panel if the autotrigger is ON
			// 	let auto_trigger = name.replace("#", "");
			// 	auto_trigger = auto_trigger.replace("-name", "-autotrigger");
			// 	let alt_switch = name.replace("#alt-", "");
			// 	alt_switch = alt_switch.replace("-name", "");

			// 	if (from_hotkey && document.getElementById(auto_trigger).checked && $("#lower-thirds-switch" + alt_switch).is(':not(:checked)')) {
			// 		$("#lower-thirds-switch" + alt_switch).prop('checked', true).change();
			// 	}
			// 	//console.log(name + "|" + info + "|" + logo + "|" + name_to_load + "|" + info_to_load + "|" + logo_to_load + "|" + alt_waiting_time);
			// }

			// ///////////////////////////////////////

			// //Open Preview screen
			// $("#toggle-preview").click(function(){
			// 	document.getElementById("toggle-preview").classList.toggle("active");
			// 	document.getElementById("alt-preview").classList.toggle("active");
			// 	if (document.getElementById("alt-panel").style.marginBottom == "0px") {
			// 		document.getElementById("alt-panel").style.marginBottom = "220px";
			// 	} else {
			// 		document.getElementById("alt-panel").style.marginBottom = "0px";
			// 	}
			// });

			// ///////////////////////////////////////

			// function getAppearance () {
			// 	//Lower Third Style
			// 	alt_1_style = $("#alt-1-style").val() || default_style;
			// 	$("#alt-1-style").val(alt_1_style);

			// 	//Calculate Text Sizes using the inverse ratio
			// 	alt_1_inverse_ratio = $("#alt-1-inverse-ratio").val() || default_inverse_ratio;
			// 	alt_1_name_size = 1 + alt_1_inverse_ratio * 0.1;
			// 	alt_1_info_size = 2 - alt_1_inverse_ratio * 0.1;

			// 	//Line Spacing
			// 	alt_1_line_spacing = $("#alt-1-line-spacing").val() || default_line_spacing;

			// 	//Lower Third Size
			// 	alt_1_size = $("#alt-1-size").val() || default_size;

			// 	//Logo Size
			// 	alt_1_logo_size = Number($("#alt-1-logo-size").val()) * 0.25 + 3.5 || default_logo_size_em;

			// 	//Shadow Amount
			// 	alt_1_shadow_amount = $("#alt-1-shadow-amount").val() * 0.1 || default_shadow_amount_em;
			
			// 	//Background Corners
			// 	alt_1_corners = (Number($("#alt-1-corners").val()) * 0.25) || default_corners;
			
			// 	//Border Thickness amount
			// 	alt_1_border_thickness_amount = $("#alt-1-border-thickness-amount").val() || default_border_thickness_amount;
			
			// 	//Margin from de borders Horizontal and Vertical
			// 	alt_1_margin_h = $("#alt-1-margin-h").val() || default_margin_h;
			// 	alt_1_margin_v = $("#alt-1-margin-v").val() || default_margin_v;

			// 	styleRestrictions();
			// }

			// function styleRestrictions() {
			// 	switch (alt_1_style){
			// 		case "1":
			// 			//Disable: align center | Enable: logo;
			// 			document.getElementById("alt-1-align-center").disabled = true;
			// 			if (document.getElementById("alt-1-align-center").checked){
			// 				$("#alt-1-align-left").prop('checked', true).change();
			// 			}
			// 			document.getElementById("alt-1-logo").disabled = false;
			// 			document.getElementById("alt-1-logo-size").disabled = false;
			// 			// document.getElementById("alt-1-background").classList.remove("locked");
			// 			$("#alt-1-style-border-color-appearance > :nth-child(3)").addClass("disabled");

			// 			break;
			// 		case "2":
			// 			//Disable: logo | Enable: align center;
			// 			document.getElementById("alt-1-align-center").disabled = false;
			// 			document.getElementById("alt-1-logo").disabled = true;
			// 			document.getElementById("alt-1-logo-size").disabled = false;
			// 			if (document.getElementById("alt-1-logo").checked){
			// 				$("#alt-1-logo").prop('checked', false).change();
			// 			}
			// 			// document.getElementById("alt-1-background").classList.remove("locked");
			// 			$("#alt-1-style-border-color-appearance > :nth-child(3)").removeClass("disabled");

			// 			break;
			// 		case "3":
			// 			//Disable: - | Enable: Logo, align center;
			// 			document.getElementById("alt-1-align-center").disabled = true;
			// 			if (document.getElementById("alt-1-align-center").checked){
			// 				$("#alt-1-align-left").prop('checked', true).change();
			// 			}
			// 			document.getElementById("alt-1-logo").disabled = false;
			// 			document.getElementById("alt-1-logo-size").disabled = true;
			// 			$("#alt-1-style-border-color-appearance > :nth-child(3)").removeClass("disabled");
			// 			// $("#alt-1-background").prop('checked', true).change(); NO
			// 			// $("#alt-1-background").prop('checked', true);
			// 			// document.getElementById("alt-1-background").classList.add("locked");

			// 			break;
			// 	}
			// }

			// //////////////////////////////////////

			// //Receive data from the source
			// bcr.onmessage = function (ev) {
			// 	const received_data = ev.data;

			// 	if (received_data.resend) {
			// 		refreshData();
			// 		function_send_font();
			// 	} else {

			// 		alt_1_active_time_monitor = received_data.activeTime1_to_send;
			// 		alt_1_inactive_time_monitor = received_data.inactiveTime1_to_send;

			// 		document.getElementById("alt-1-active-time-monitor").innerHTML = alt_1_active_time_monitor;
			// 		document.getElementById("alt-1-inactive-time-monitor").innerHTML = alt_1_inactive_time_monitor;

			// 		alt_1_turnoff = (received_data.alt_1_turnoff);


			// 		if (alt_1_turnoff && $("#lower-thirds-switch1").is(':checked')) {
			// 			$("#lower-thirds-switch1").prop('checked', false).change();
			// 		}

			// 		checkSwitches();
			// 	}
			// }

			// //////////////////////////////////////

			// function function_send() {
			// 	//Switch Lock Active Mode ALT ON/OFF
			// 	global_lock_active = mainSettings.active;
			// 	// global_lock_active = (document.getElementById("global-lock-active").checked) ? true : false;

			// 	alt_1_lock_active = (document.getElementById("alt-1-lock-active").checked) ? true : false;

			// 	//////////////////////////////

			// 	global_animation_time = $("#global-animation-time").val();
			// 	if (global_lock_active){
			// 		global_active_time = Infinity;
			// 	} else {
			// 		global_active_time = $("#global-active-time").val();
			// 	}
			// 	global_inactive_time = $("#global-inactive-time").val();

			// 	alt_1_name = $("#alt-1-name:text").val();
			// 	alt_1_info = $("#alt-1-info:text").val();
			// 	alt_1_name_color = $("#alt-1-name-color:text").val();
			// 	alt_1_info_color = $("#alt-1-info-color:text").val();
			// 	alt_1_style_color_1 = $("#alt-1-style-color-1:text").val();
			// 	alt_1_style_color_2 = $("#alt-1-style-color-2:text").val();
			// 	alt_1_style_color_3 = $("#alt-1-style-color-3:text").val();
			// 	alt_1_style_color_4 = $("#alt-1-style-color-4:text").val();

			// 	alt_1_animation_time = $("#alt-1-animation-time").val();
			// 	if (alt_1_lock_active){
			// 		alt_1_active_time = Infinity;
			// 	} else {
			// 		alt_1_active_time = $("#alt-1-active-time").val();
			// 	}
			// 	alt_1_inactive_time = $("#alt-1-inactive-time").val();
			// 	alt_1_logo_image= $("#alt-1-logo-preview").attr("src");

			// 	//Standard Main settings values
			// 	if(!global_lock_active && global_active_time == "") {
			// 		global_active_time = 25;
			// 	}
			// 	if(global_inactive_time == "") {
			// 		global_inactive_time = 420;
			// 	}
			// 	if(global_animation_time == "") {
			// 		global_animation_time = 4;
			// 	}

			// 	//Check Master Switch
			// 	if (mainSettings.active) {
			// 		masterSwitchIsOn = true;
			// 	} else {
			// 		masterSwitchIsOn = false;
			// 	}

			// 	//Check switches
			// 	if (masterSwitchIsOn) {
			// 		//Switch 1
			// 		if (document.getElementById("lower-thirds-switch1").checked){
			// 			alt_1_switch = "true";
			// 		} else {
			// 			alt_1_switch = "false";
			// 		}
			// 	} else {
			// 		//When the Main Switch is OFF all the Lower Thirds area Inactives or OFF.
			// 		alt_1_switch = "false";
			// 	}

			// 	alt_1_waiting_time = alt_1_animation_time || global_animation_time;

			// 	//////////////////////////////

			// 	//Switch Autoload ALT ON/OFF
			// 	alt_1_autoload = (document.getElementById("alt-1-autoload").checked) ? true : false;

			// 	//////////////////////////////

			// 	//Switch Autotrigger ALT ON/OFF
			// 	alt_1_autotrigger = document.getElementById("alt-1-autotrigger").checked;


			// 	//////////////////////////////

			// 	//Switch One-shot Mode ALT ON/OFF
			// 	global_oneshot = (document.getElementById("global-oneshot").checked) ? true : false;

			// 	alt_1_oneshot = (document.getElementById("alt-1-oneshot").checked) ? true : false;

			// 	//////////////////////////////

			// 	//Show the slots numbers
			// 	if (document.getElementById("set-slot-numbers").checked == false) {
			// 		$('.slot-number').each(function(){
			// 			$(this).removeClass("hide");
			// 		});
			// 	} else {
			// 		$('.slot-number').each(function(){
			// 			$(this).addClass("hide");
			// 		});
			// 	}

			// 	//////////////////////////////

			// 	//Create Tooltips to show the contect of the slots
			// 	if (document.getElementById("set-tooltips").checked) {
			// 		$('.panel-bottom > ul > li').each(function(){
			// 			var name_to_tooltip = $(this).children('.stored-name').text();
			// 			var info_to_tooltip = $(this).children('.stored-info').text();
			// 			var isStored = (name_to_tooltip && info_to_tooltip) ? true : false;
			// 			var isTooltip = $(this).children(".tooltiptext")[0] ? true : false;

			// 			if (isTooltip){
			// 				if (!isStored) {
			// 					$(this).children(".tooltiptext").remove();
			// 					// $(this).prepend('<span class="tooltiptext"><p>Empty. Click to save.</p></span>');
			// 				}
			// 			} else {
			// 				if (isStored) {
			// 					$(this).prepend('<span class="tooltiptext">' + name_to_tooltip + '<br>' + info_to_tooltip + '<hr><p>Click and hold to delete.</p></span>');
			// 				}
			// 			}

			// 		});
			// 	} else {
			// 		$('.tooltiptext').each(function(){
			// 			$(this).remove();
			// 		});
			// 	}


			// 	//////////////////////////////

			// 	if (document.getElementById("set-switch-position").checked) {
			// 		$('.switch').each(function(){
			// 			$(this).addClass("switch-left");
			// 		});
			// 		$('.drag-handle').each(function(){
			// 			$(this).addClass("switch-left");
			// 		});
			// 		$('.main-title').addClass("switch-left");

			// 	} else {
			// 		$('.switch').each(function(){
			// 			$(this).removeClass("switch-left");
			// 		});
			// 		$('.drag-handle').each(function(){
			// 			$(this).removeClass("switch-left");
			// 		});
			// 		$('.main-title').removeClass("switch-left");
			// 	}


			// 	//////////////////////////////

			// 	//Switch Preview ALT ON/OFF
			// 	if (document.getElementById("set-preview").checked) {
			// 		$('#alt-preview, .preview-btn').each(function(){
			// 			$(this).removeClass("hide");
			// 		});
			// 	} else {
			// 		$('#alt-preview, .preview-btn').each(function(){
			// 			$(this).addClass("hide");
			// 		});
			// 	}

			// 	if (document.getElementById("alt-1-preview").checked == false) {
			// 		alt_1_preview = "false";
			// 	} else {
			// 		alt_1_preview = "true";
			// 	}


			// 	//////////////////////////////

			// 	//Font of the Lower Third
			// 	var font_id_1 = document.getElementById("alt-1-font");
			// 	var alt_1_font = font_id_1.options[font_id_1.selectedIndex].value;

			// 	//Alignment of the Lower Third
			// 	var alt_1_align = $('input[name=alt-1-align]:checked').val();
			// 	if (!alt_1_align) {
			// 		$('#alt-1-align-left').prop('checked', true).change();
			// 	}

			// 	//
			// 	if (global_oneshot){
			// 		document.getElementById("global-inactive-time").classList.add("disable");
			// 	} else {
			// 		document.getElementById("global-inactive-time").classList.remove("disable");
			// 	}
			// 	if (alt_1_oneshot){
			// 		document.getElementById("alt-1-inactive-time").classList.add("disable");
			// 	} else {
			// 		document.getElementById("alt-1-inactive-time").classList.remove("disable");
			// 	}

			// 	//
			// 	if (global_lock_active){
			// 		document.getElementById("global-active-time").classList.add("disable");
			// 	} else {
			// 		document.getElementById("global-active-time").classList.remove("disable");
			// 	}
			// 	if (alt_1_lock_active){
			// 		document.getElementById("alt-1-active-time").classList.add("disable");
			// 		// document.getElementById("alt-1-active-time").value = "Locked";
			// 	} else {
			// 		document.getElementById("alt-1-active-time").classList.remove("disable");
			// 		// document.getElementById("alt-1-active-time").value = "";
			// 	}

			// 	//Shows if custom time settings is used
			// 	if (alt_1_animation_time || (alt_1_active_time && alt_1_active_time != 'Infinity') || alt_1_inactive_time || alt_1_lock_active || alt_1_oneshot) {
			// 		$("#alt-1-custom-times").children(".icon-btn").addClass("active");
			// 	} else {
			// 		$("#alt-1-custom-times").children(".icon-btn").removeClass("active");
			// 	}

			// 	bc.postMessage({global_animation_time, global_active_time, global_inactive_time, alt_1_switch, alt_1_style, alt_1_name, alt_1_info, alt_1_name_size, alt_1_info_size , alt_1_name_transform, alt_1_info_transform, alt_1_name_weight, alt_1_name_style, alt_1_info_weight, alt_1_info_style, alt_1_name_color, alt_1_info_color, alt_1_style_color_1, alt_1_style_color_2, alt_1_logo_switch, alt_1_background_switch, alt_1_shadows, alt_1_align, alt_1_size, alt_1_margin_h, alt_1_margin_v, alt_1_line_spacing, alt_1_font, alt_2_switch, alt_2_style, alt_2_name, alt_2_info, alt_2_name_size, alt_2_info_size , alt_2_name_transform, alt_2_info_transform, alt_2_name_weight, alt_2_name_style, alt_2_info_weight, alt_2_info_style, alt_2_name_color, alt_2_info_color, alt_2_style_color_1, alt_2_style_color_2, alt_2_logo_switch, alt_2_background_switch, alt_2_shadows, alt_2_align, alt_2_size, alt_2_margin_h, alt_2_margin_v, alt_2_line_spacing, alt_2_font, alt_3_switch, alt_3_style, alt_3_name, alt_3_info, alt_3_name_size, alt_3_info_size , alt_3_name_transform, alt_3_info_transform, alt_3_name_weight, alt_3_name_style, alt_3_info_weight, alt_3_info_style, alt_3_name_color, alt_3_info_color, alt_3_style_color_1, alt_3_style_color_2, alt_3_logo_switch, alt_3_background_switch, alt_3_shadows, alt_3_align, alt_3_size, alt_3_margin_h, alt_3_margin_v, alt_3_line_spacing, alt_3_font, alt_4_switch, alt_4_style, alt_4_name, alt_4_info, alt_4_name_size, alt_4_info_size , alt_4_name_transform, alt_4_info_transform, alt_4_name_weight, alt_4_name_style, alt_4_info_weight, alt_4_info_style, alt_4_name_color, alt_4_info_color, alt_4_style_color_1, alt_4_style_color_2, alt_4_logo_switch, alt_4_background_switch, alt_4_shadows, alt_4_align, alt_4_size, alt_4_margin_h, alt_4_margin_v, alt_4_line_spacing, alt_4_font, alt_1_animation_time, alt_1_active_time, alt_1_inactive_time, alt_2_animation_time, alt_2_active_time, alt_2_inactive_time, alt_3_animation_time, alt_3_active_time, alt_3_inactive_time, alt_4_animation_time, alt_4_active_time, alt_4_inactive_time, alt_1_logo_image, alt_2_logo_image, alt_3_logo_image, alt_4_logo_image, global_oneshot, alt_1_oneshot, alt_2_oneshot, alt_3_oneshot, alt_4_oneshot, alt_1_logo_size, alt_1_shadow_amount, alt_1_corners, alt_1_border_switch, alt_1_border_thickness_amount, alt_1_style_color_3, alt_1_style_color_4, alt_2_logo_size, alt_2_shadow_amount, alt_2_corners, alt_2_border_switch, alt_2_border_thickness_amount, alt_2_style_color_3, alt_2_style_color_4, alt_3_logo_size, alt_3_shadow_amount, alt_3_corners, alt_3_border_switch, alt_3_border_thickness_amount, alt_3_style_color_3, alt_3_style_color_4, alt_4_logo_size, alt_4_shadow_amount, alt_4_corners, alt_4_border_switch, alt_4_border_thickness_amount, alt_4_style_color_3, alt_4_style_color_4, alt_1_preview, alt_2_preview, alt_3_preview, alt_4_preview});
			// }

			// //Send New Fonts to source
			// function function_send_font() {
			// 	$.each(fontlist_urls, function(i) {
			// 		new_font_to_send = fontlist_urls[i];
			// 		bcf.postMessage({new_font_to_send});
			// 	});					
			// }

			//Read txt file and call writeLocalStorage function
			// document.getElementById('importFile').onchange = function(){
			// 	var file = this.files[0];
			// 	var reader = new FileReader();
			// 	reader.onload = function(progressEvent){
			// 		localStorage.clear();
					
			// 		writeLocalStorage(this.result);
			// 	};
			// 	reader.readAsText(file);
			// };

			//Read all localstorage data
			function getLocalStorage() {
				var a = {};
				for (var i = 0; i < localStorage.length; i++) {
					var k = localStorage.key(i);
					var v = localStorage.getItem(k);
					a[k] = v;
				}
				var s = JSON.stringify(a);
				return s;
			}

			//Save data to localStorage
			function writeLocalStorage(data) {
				var o = JSON.parse(data);
				for (var property in o) {
					if (o.hasOwnProperty(property)) {
						localStorage.setItem(property, o[property]);
					}
				}
				location.reload();
        	}

			//Copy all data to clipboard
			function exportData() {
				var allData = getLocalStorage();
				document.getElementById("dataInput").value = allData;
				var copyText = document.getElementById("dataInput");

				//Open the Popup "Copied to Clipboard"
				openExportPopup();

				//Select text input and copy to the clipboard
				copyText.select();
				document.execCommand("copy");
        	}


			function refreshData() {
			// 	console.log('refreshData');
			// 	checkLogos();
			// 	checkSlots("#alt-1-memory-slots", "#alt-1-name", "#alt-1-info", "#alt-1-logo-preview");
			// 	checkSlots("#alt-2-memory-slots", "#alt-2-name", "#alt-2-info", "#alt-2-logo-preview");
			// 	checkSlots("#alt-3-memory-slots", "#alt-3-name", "#alt-3-info", "#alt-3-logo-preview");
			// 	checkSlots("#alt-4-memory-slots", "#alt-4-name", "#alt-4-info", "#alt-4-logo-preview");
			// 	getAppearance();
			// 	checkSwitches();
			// 	function_send();
			}

			// function checkUpdates() {
			// 	checkHotkeys();
			// 	updateHotkeys();
			// }

			// setTimeout(() => {
			// 	initTooltips();
			// }, 100);
			// loadDefaultValues();
			// updateCustomFontList();
			// refreshData();
			// checkSwitches();
			// setInterval(() => checkUpdates(), 200);

			// // Wait document to be ready to do some stuff
			// $( document ).ready(function() {
			// 	$('#defaultTab').click();
			// });

		</script>

	</body>
</html>